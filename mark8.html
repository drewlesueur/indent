<script src="underscore-min.js"></script>
<script src="parens.js"></script>
<script src="string_indent.js"></script>
<script src="indent.js"></script>
<script src="mark8.js"></script>

<textarea id="t" style="width: 100%; height: 300px; font-family: courier new; font-size: 20px;">
greet name = spaced Hi name
greeting = greet drew
alert greeting

greeting2 = greet (drew lesueur)
alert greeting2


area_of_circle r = ^ (* 3.14 r) 2

alert (area_of_circle 1)
</textarea>
<input type="button" onclick="run()" value="run"/>

<pre id="o"></pre>
<script>
var log = function (x) {
  return console.log(x)
}
var loop = function (x, f) {
  return _.times(x, f)
} 
function run() {
  var code = document.getElementById("t").value;
  var result = mark8(code, 0, {
    "alert": 1,
    "document": 1,
    "window": 1,
    "log": 1,
    loop: 1
  });
  document.getElementById("o").innerHTML = result;
  eval("console.log((function () {" +result+"})())")
}
</script>
